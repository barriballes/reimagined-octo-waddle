//rcal js
function RecipeCalculator(){function l(f){if(1E-6>Math.abs(f-Math.round(f)))return""+Math.round(f);for(var a=0<=f?1:-1,b=f=Math.abs(f),h=1,e=0,d=0,k=1,c=0;100>c;c++){var g=Math.floor(b);var l=h;h=g*h+e;e=l;l=d;d=g*d+k;k=l;b=1/(b-g);if(Math.abs(d*f-h)<=1E-6*d)return"<span class='numerator'>"+a*h+"</span>/<span class='denominator'>"+d+"</span>";if(1E3<=d)break}return f.toFixed(6)}function k(f){return+(Math.round(f+"e+2")+"e-2")}jQuery.each(jQuery(".quantity"),function(){var f=jQuery(this),a=parseFloat(f.text()).toFixed(15),
b=parseInt(jQuery(".portions-num").text(),10);isNaN(f.text())?(a=f.text().split("/"),b=parseInt(a[0],10)/parseInt(a[1],10)/b):b=a/b;f.attr("data-per-portion",b)});jQuery.each(jQuery(".nutrient-value"),function(){var f=jQuery(this),a=parseFloat(f.text()).toFixed(3),b=parseInt(jQuery(".portions-num").text(),10);f.attr("data-nutrient-per-portion",a/b)});var m=function(f){jQuery.each(jQuery(".nutrient"),function(){var a=jQuery(this),b=parseFloat(a.find(".nutrient-value").data("nutrient-per-portion"));
b*=f;var h=a.find(".nutrient-unit").html();if("g"==h||"mg"==h)1>b?(a.find(".nutrient-value").html(k(1E3*b)),a.find(".nutrient-unit").html("mg")):(a.find(".nutrient-value").html(k(b)),a.find(".nutrient-unit").html("g"));if("\u0433\u0440"==h||"\u043c\u0433"==h)1>b?(a.find(".nutrient-value").html(k(1E3*b)),a.find(".nutrient-unit").html("\u043c\u0433")):(a.find(".nutrient-value").html(k(b)),a.find(".nutrient-unit").html("\u0433\u0440"));""==h&&a.find(".nutrient-value").html(k(b))});jQuery(".nutrients-wrap").is(":empty")&&
jQuery(".nutrients-wrap").hide();jQuery.each(jQuery(".recipe-ingredients"),function(){var a=jQuery(this),b=jQuery(this).find("p"),h=parseFloat(a.find(".quantity").data("per-portion")),e=f*h,d=a.find(".quantity-unit").html();h=e.toFixed();var k=e.toFixed(1);"ml"==d||"g"==d?a.addClass("decimal-hundreds"):("lb"==d||"lbs"==d||"oz"==d||"fl oz"==d||"pt"==d||"qt"==d)&&a.addClass("decimal-tens");b.hasClass("plural-name")&&1<e&&""==d?(a.find("p.single-name").hide(),a.find("p.plural-name").show()):(b.hasClass("plural-name")&&
1>=e&&""==d&&a.find("p.single-name").show(),a.find("p.plural-name").hide());"cup"==d&&1<e?a.addClass("plural"):"cups"==d&&2>=e&&a.removeClass("plural");if(a.hasClass("plural")){b=a.find(".quantity-unit");for(var c=0;c<b.length;c++)b[c].innerText="cups"}if("cups"==d&&1>=e)for(b=a.find(".quantity-unit"),c=0;c<b.length;c++)b[c].innerText="cup";"ml"==d&&1E3<=e?a.addClass("litter"):"L"==d&&999>=e&&a.removeClass("litter");if(a.hasClass("litter"))for(b=a.find(".quantity-unit"),c=0;c<b.length;c++){b[c].innerText=
"L";var g=e/1E3;quantityLitters=0==g%1?g.toFixed():g.toFixed(1)}if("L"==d&&999>=e)for(b=a.find(".quantity-unit"),c=0;c<b.length;c++)b[c].innerText="ml";"g"==d&&1E3<=e?a.addClass("kilo"):"kg"==d&&999>=e&&a.removeClass("kilo");if(a.hasClass("kilo"))for(b=a.find(".quantity-unit"),c=0;c<b.length;c++)b[c].innerText="kg",g=e/1E3,quantityKilograms=0==g%1?g.toFixed():g.toFixed(1);if("kg"==d&&999>=e)for(b=a.find(".quantity-unit"),c=0;c<b.length;c++)b[c].innerText="g";"kopje"==d&&1<e?a.addClass("meervoud"):
"kopjes"==d&&2>=e&&a.removeClass("meervoud");if(a.hasClass("meervoud"))for(b=a.find(".quantity-unit"),c=0;c<b.length;c++)b[c].innerText="kopjes";if("kopjes"==d&&1>=e)for(b=a.find(".quantity-unit"),c=0;c<b.length;c++)b[c].innerText="kopje";"Tasse"==d&&1<e?a.addClass("plural-de"):"Tassen"==d&&2>=e&&a.removeClass("plural-de");if(a.hasClass("plural-de"))for(b=a.find(".quantity-unit"),c=0;c<b.length;c++)b[c].innerText="Tassen";if("Tassen"==d&&1>=e)for(b=a.find(".quantity-unit"),c=0;c<b.length;c++)b[c].innerText=
"Tasse";"taza"==d&&1<e?a.addClass("plural-es"):"tazas"==d&&2>=e&&a.removeClass("plural-es");if(a.hasClass("plural-es"))for(b=a.find(".quantity-unit"),c=0;c<b.length;c++)b[c].innerText="tazas";if("tazas"==d&&1>=e)for(b=a.find(".quantity-unit"),c=0;c<b.length;c++)b[c].innerText="taza";"cs\u00e9sze"==d&&1<e?a.addClass("plural-hu"):"cs\u00e9sz\u00e9k"==d&&2>=e&&a.removeClass("plural-hu");if(a.hasClass("plural-hu"))for(b=a.find(".quantity-unit"),c=0;c<b.length;c++)b[c].innerText="cs\u00e9sz\u00e9k";if("cs\u00e9sz\u00e9k"==
d&&1>=e)for(b=a.find(".quantity-unit"),c=0;c<b.length;c++)b[c].innerText="cs\u00e9sze";"\u0447. \u0447\u0430\u0448\u0430"==d&&1<e?a.addClass("mnojestveno"):"\u0447. \u0447\u0430\u0448\u0438"==d&&2>=e&&a.removeClass("mnojestveno");if(a.hasClass("mnojestveno"))for(b=a.find(".quantity-unit"),c=0;c<b.length;c++)b[c].innerText="\u0447. \u0447\u0430\u0448\u0438";if("\u0447. \u0447\u0430\u0448\u0438"==d&&1>=e)for(b=a.find(".quantity-unit"),c=0;c<b.length;c++)b[c].innerText="\u0447. \u0447\u0430\u0448\u0430";
"\u0447\u0430\u0448\u043a\u0430"==d&&1!==e?a.addClass("mnojestvennoe"):"\u0447\u0430\u0448\u043a\u0438"==d&&1==e&&a.removeClass("mnojestvennoe");if(a.hasClass("mnojestvennoe"))for(b=a.find(".quantity-unit"),c=0;c<b.length;c++)b[c].innerText="\u0447\u0430\u0448\u043a\u0438";if("\u0447\u0430\u0448\u043a\u0438"==d&&1==e)for(b=a.find(".quantity-unit"),c=0;c<b.length;c++)b[c].innerText="\u0447\u0430\u0448\u043a\u0430";"\u043c\u043b"==d&&1E3<=e?a.addClass("litar"):"\u043b"==d&&999>=e&&a.removeClass("litar");
if(a.hasClass("litar"))for(b=a.find(".quantity-unit"),c=0;c<b.length;c++)b[c].innerText="\u043b",g=e/1E3,quantityLitar=0==g%1?g.toFixed():g.toFixed(1);if("\u043b"==d&&999>=e)for(b=a.find(".quantity-unit"),c=0;c<b.length;c++)b[c].innerText="\u043c\u043b";"\u0433\u0440"==d&&1E3<=e?a.addClass("kilogram"):"\u043a\u0433"==d&&999>=e&&a.removeClass("kilogram");if(a.hasClass("kilogram"))for(b=a.find(".quantity-unit"),c=0;c<b.length;c++)b[c].innerText="\u043a\u0433",g=e/1E3,quantityKilogramsCyrilic=0==g%1?
g.toFixed():g.toFixed(1);if("\u043a\u0433"==d&&999>=e)for(b=a.find(".quantity-unit"),c=0;c<b.length;c++)b[c].innerText="\u0433\u0440";0!==e%1&&(e.toFixed(2),d=Math.floor(e),0===d?e=l(e-d):(e-=d,e=0==l(e)?d.toString():d.toString()+" "+l(e)));a.find(".quantity").html(e);a.hasClass("decimal-hundreds")&&(0==e%1?a.find(".quantity").html(h):a.find(".quantity").html(k));0!==e%1&&a.hasClass("decimal-tens")&&a.find(".quantity").html(k);a.hasClass("litter")&&a.find(".quantity").html(quantityLitters);a.hasClass("kilo")&&
a.find(".quantity").html(quantityKilograms);a.hasClass("litar")&&a.find(".quantity").html(quantityLitar);a.hasClass("kilogram")&&a.find(".quantity").html(quantityKilogramsCyrilic)})};jQuery(".control-ingredients button").click(function(){var f=jQuery(".portions-num"),a=parseInt(f.text(),10),b="",h=jQuery("span.portions-text-single").text(),e=jQuery("span.portions-text-plural").text();if(jQuery(this).hasClass("up")){var d=a+1;if(1E3<d)return!1}else if(jQuery(this).hasClass("down")&&(d=a-1,1>d))return!1;
1===d&&(b=h);1<d&&(b=e);jQuery(".portions-text").text(b);f.text(d);m(d)});m(parseInt(jQuery(".portions-num").text(),10));jQuery.each(jQuery(".quantity-unit"),function(){""==jQuery(this).html()&&jQuery(this).hide()});jQuery.each(jQuery(".recipe-ingredients"),function(){var f=jQuery(this);f.on("click",function(){f.hasClass("checked-ingredients")?jQuery(this).removeClass("checked-ingredients"):jQuery(this).addClass("checked-ingredients")})});var n=jQuery(".rcal-wrap").outerWidth(),p=jQuery(".ingredients"),
q=jQuery(".instructions");800>=n&&(p.css("width","100%"),q.css("width","100%"))}jQuery(document).ready(function(){RecipeCalculator()});jQuery(document).ajaxComplete(function(){RecipeCalculator()});